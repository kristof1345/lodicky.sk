---
import Front3 from "../assets/renegade/front3.webp";
import BackTopSmall from "../assets/renegade/back_top_small.webp";
import RenegadeFront2Small from "../assets/renegade/renegade_front2_small.webp";
import Front3Small from "../assets/renegade/front3_small.webp";
import FromSideSmall from "../assets/renegade/from_side_small.webp"
import ProtectorSmall from "../assets/renegade/protector_small.webp";
import BacksideSmall from "../assets/renegade/backside_small.webp"
import Shore1Small from "../assets/renegade/shore1_small.webp"

import LeftArrow from "../assets/arrow-left2.svg";
import RightArrow from "../assets/arrow-right2.svg";
import Image from "astro/components/Image.astro";

import SliderControls from "./SliderControls.astro";
---

<div class="slideshow-container">
  <div class="holder">
    <img src={Front3.src} id="imag" alt="Renegade" data-img="1" loading="eager"/>

    <div id="preview-container">
      <div id="preview">
        <div class="preview-holder" style="border: 1px solid rgba(125, 164, 238, 0.407);">
          <Image src={Front3Small} class="preview-image" alt="renegade" data-nth="0" loading="eager"/>
        </div>
        <div class="preview-holder">
          <Image src={RenegadeFront2Small} class="preview-image" alt="renegade" data-nth="1" loading="eager"/>
        </div>
        <div class="preview-holder">
          <Image src={FromSideSmall} class="preview-image" alt="renegade" data-nth="2" loading="eager"/>
        </div>
        <div class="preview-holder">
          <Image src={BackTopSmall} class="preview-image" alt="renegade" data-nth="3" loading="eager"/>
        </div>
        <div class="preview-holder">
          <Image src={BacksideSmall} class="preview-image" alt="renegade" data-nth="4" loading="eager"/>
        </div>
        <div class="preview-holder">
          <Image src={ProtectorSmall} class="preview-image" alt="renegade" data-nth="5" loading="eager"/>
        </div>
        <div class="preview-holder">
          <Image src={Shore1Small} class="preview-image" alt="renegade" data-nth="6" loading="eager"/>
        </div>
      </div>
    </div>

      <SliderControls />
    </div>
  </div>
</div>

<script type="module" defer>
  let images = ["/renegade/front3.webp", "/renegade/renegade_front2.webp", "/renegade/from_side.webp", "/renegade/back_top.webp", "/renegade/backside.webp", "/renegade/protector.webp", "/renegade/shore1.webp"];
  let previewImages = document.querySelectorAll(".preview-image");
  let img = document.getElementById("imag");

  previewImages.forEach((preview) => {
    preview.addEventListener("click", () => {
      img.src = images[preview.dataset.nth];
      removeBorders();
      preview.parentElement.style.border = "1px solid rgba(125, 164, 238, 0.407)";
    })
  })

  function removeBorders() {
    previewImages.forEach((preview) => {
      preview.parentElement.style.border = "1px solid white";
    })
  }
</script>

<style>

#imag {
  max-height: 550px;
  max-width: 100%;
  border-radius: 0.5rem;
  user-select: none;
}

.holder {
  text-align: center;
  width: 650px;
  overflow: hidden;
  border-radius: 0.5rem;
}

#preview-container {
  overflow-y: hidden;
  overflow-x: auto;
  -ms-overflow-style: none;  /* IE and Edge */
  scrollbar-width: none;  /* Firefox */
}

#preview-container::-webkit-scrollbar {
  display: none;
}

#preview {
  display: flex;
  align-items: center;
  gap: 2px;
  transition: transform 0.5s ease;
  user-select: none;
  /* border-radius: 5px; */
}

.preview-holder {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 5px;
  border: 1px solid rgba(255, 255, 255, 0.207);
}

.preview-holder:hover {
  border: 1px solid rgba(125, 164, 238, 0.407);
}

#preview img {
  width: 100px;
  height: 76px;
  border-radius: 4px;
  cursor: pointer;
  user-select: none;
  object-fit: contain;
}

@media (max-width: 1450px) {
  #imag {
  max-height: 550px;
}

.holder {
  width: 580px;
}
}

@media (max-width: 1040px) {
  .holder {
    width: 100%;
  }
}

@media (max-width: 750px) {
  .holder {
    width: 100%;
  }
}
</style>